1) copy manual PDFs from chronojump-docs repository, because in chronojump repository PDFs are not updated
check is "updated to last version"
cp ../chronojump-docs/chronojump_manual_e*.pdf manual/

2) change version on configure.ac and src/AssemblyInfo.cs


linux stuff
------------

sh autogen.sh
make dist


VERSION=0.9.3
[1]
git commit -a -m "Bump version $VERSION"

git push
git checkout -b "tags/$VERSION" # creates a new branch
# keep doing commits:
# git commit -a
# git commit -a
# git cherry-pick -x "commit-from-master-or-some-branch-that-we-want-here"

When we are happy:
git tag -a "$VERSION"
git push origin --tags
scp "chronojump-$VERSION.tar.gz" xaviblas@master.gnome.org:.
ssh xaviblas@master.gnome.org
ftpadmin install "chronojump-$VERSION.tar.gz"

Go back to master:
git checkout master

git note:
If we want to release 0.9.4 based on an bug fix from 0.9.3:

git checkout tags/0.9.3
git checkout -b tags/0.9.4 # creates a new branch based on 0.9.3
git cherry-pick -x "commit-from-master-or-some-branch-that-we-want-here"
vim "fix something"
git commit -a -m "Important fix"
VERSION=0.9.4
Then go to [1]


DEB) create deb package

DEB.A) 1st time
sudo apt-get install devscripts dput debhelper cdbs mono-devel cli-common-dev libdistro-info-perl

GPG key (add random)
apt-get install rng-tools
rngd -r /dev/urandom
GPG generate key:
gpg --gen-key
(use the values on DEBFULLNAME and DEBEMAIL, see below)

DEB.B) every time
export DEBFULLNAME="Xavier de Blas"
export DEBEMAIL="info@chronojump.org"
./deb-pkg.sh 1

read carefully screen messages. Once says: successfully uploaded, need to wait 1h 30' aprox, then an email will be sent from launchpad telling if ok or not.

if there are problems, remove build-deb and repeat process

DEB.C) upload deb on raspbian
needs this ~/.dput.cf

[chronojump-ppa]
fqdn = ppa.launchpad.net
method = ftp
incoming = ~u-info-x/chronojump-ppa/ubuntu/
login = anonymous
allow_unsigned_uploads = 0

and upload like this:
dput chronojump-ppa build-deb/chronojump..._source.changes

--- end of upload deb package on raspbian ---


macosx stuff
------------
download (with filezilla is very fast), using owncloud is nice also
/Users/chronojump/chronojump/Chronojump-1.4.2-x86_64.dmg
scp -l 8192 Chronojump...dmg xaviblas@master.gnome.org:.
ssh xaviblas@master.gnome.org
mv Chrono...dmg /ftp/pub/gnome/binaries/mac/chronojump
cd /ftp/pub/gnome/binaries/mac/chronojump
chmod +r ...dmg
signal-ftp-sync
wait 5'

windows stuff
------------
See: howto_compile.txt

scp -l 8192 Chronojump...exe xaviblas@master.gnome.org:.
ssh xaviblas@master.gnome.org
mv Chrono...exe /ftp/pub/gnome/binaries/win32/chronojump
cd /ftp/pub/gnome/binaries/win32/chronojump
chmod +rx Chrono...exe
signal-ftp-sync
wait 5'

API (GetLastVersion)
--------------------
ssh to chronojump server
su
vi /etc/chronojump.conf

Update: chronojump_stable_version (4 numbers, eg. 1.4.9.0)

/etc/init.d/gunicorn restart
verify:
curl http://api.chronojump.org:8080/version

tell people stuff
-------------
twitters
publish on website
publish on forum
Tell people to update wikipedia page
twitters again with photos, changes, ...

other stuff
-----------
Update manual/s to chronojump site if changed

_____________ OLD _____________

server stuff
------------
ssh to chronojump server, sqlite-3 chronojump_server.db
update preferences set value="0.9.3.0" where name="versionAvailable";

